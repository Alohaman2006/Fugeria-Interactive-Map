<html>
<head>
  <title>The Map of Frexis</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="map-base.css">
  <link rel="stylesheet" href="map-ui.css">
  <link rel="stylesheet" href="map-layers.css">

  <style>

  </style>
</head>
<body>
  <div id="map"></div>
  <div id="coords" style="position: fixed; bottom: 10px; left: 10px; color: white; background: rgba(0,0,0,0.5); padding: 4px 8px; border-radius: 4px; font-family: monospace; z-index: 1000;"></div>  
  
  <div class="info-box" id="infoBox">
    <h3>Frexis</h3>
  If you are not redirected automatically, <a href="latrian/latrian.html">click here</a>.
  </p>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const mapWidth = 2048;
    const mapHeight = 2048; 
    const bounds = [[0,0], [mapHeight, mapWidth]];
    const map = L.map('map', {
      crs: L.CRS.Simple,
      minZoom: -1.5,
      maxZoom: 4,
      maxBounds: bounds,
      maxBoundsViscosity: 1.0
    }).fitBounds(bounds);

    map.on('mousemove', function(e) {
  const coordDiv = document.getElementById('coords');
  if (coordDiv) {
    const x = Math.round(e.latlng.lng);
    const y = Math.round(e.latlng.lat);
    coordDiv.innerHTML = `X: ${x}, Y: ${y}`;
  }
});

    
    const blank = L.imageOverlay('images/frexis.webp', bounds).addTo(map);
    const detailed = L.imageOverlay('images/frexis_detail.webp', bounds);
    const temperature = L.imageOverlay('images/frexis_temperture.webp', bounds);
    const tectonic = L.imageOverlay('images/frexis_tectonic.webp', bounds);

    // Overlay groups (info layers)
    const politicalLayer = L.layerGroup();
    const temperatureLayer = L.layerGroup();

    // land
    const svardey = L.polygon([
      [186, 1234], [206, 1154], [266, 1112], [266, 1104], [370, 1092], [432, 1106], [508, 1172], [486, 1302], [424, 1396], [242, 1206], [192, 1242]
    ], { color: "transparent", weight: 2, fillOpacity: 0.2 })
      .bindPopup("<b><a href='svardey/svardey.html'>Svardey</a></b>");
    politicalLayer.addLayer(svardey);

    const baseMaps = {
      "Blank": blank,
      "Detailed": detailed,
      "Temperature": temperature,
      "Tectonic": tectonic
    };

    L.control.layers(baseMaps, null).addTo(map);
    
    const InfoControl = L.Control.extend({
      onAdd: function() {
        const btn = L.DomUtil.create('button', 'info-toggle-btn');
        btn.innerHTML = 'ℹ️ Info';
        L.DomEvent.disableClickPropagation(btn);
        btn.onclick = function() {
          const box = document.getElementById('infoBox');
          box.classList.toggle('open'); // uses your CSS .info-box.open rules
        };
        return btn;
      },
      onRemove: function() {}
    });
    new InfoControl({ position: 'topright' }).addTo(map);

  </script>
</body>
</html>
