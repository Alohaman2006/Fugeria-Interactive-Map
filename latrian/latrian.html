<html>
<head>
  <title>The Latrian Peninsula Map</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="../map-base.css">
  <link rel="stylesheet" href="../map-ui.css">
  <link rel="stylesheet" href="../map-layers.css">

  <style>

  </style>
</head>
<body>
  <div id="map"></div>
  <div id="coords" style="position: fixed; bottom: 10px; left: 10px; color: white; background: rgba(0,0,0,0.5); padding: 4px 8px; border-radius: 4px; font-family: monospace; z-index: 1000;"></div>
  
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const mapWidth = 2048;
    const mapHeight = 2048; 
    const bounds = [[0,0], [mapHeight, mapWidth]];
    const map = L.map('map', {
      crs: L.CRS.Simple,
      minZoom: -1.5,
      maxZoom: 4,
      maxBounds: bounds,
      maxBoundsViscosity: 1.0
    }).fitBounds(bounds);

    map.on('mousemove', function(e) {
  const coordDiv = document.getElementById('coords');
  if (coordDiv) {
    const x = Math.round(e.latlng.lng);
    const y = Math.round(e.latlng.lat);
    coordDiv.innerHTML = `X: ${x}, Y: ${y}`;
  }
});

    
    const blank = L.imageOverlay('../images/latrian/latrian_blank.jpg', bounds).addTo(map);
    const detailed = L.imageOverlay('../images/latrian/latrian_detail.jpg', bounds);
    const temperature = L.imageOverlay('../images/latrian/latrian_temperture.jpg', bounds);
    const culture = L.imageOverlay('../images/latrian/latrian_culture.jpg', bounds);
    const political = L.imageOverlay('../images/latrian/latrian_detail.jpg', bounds);

    // Overlay groups (info layers)
    const politicalLayer = L.layerGroup();
    const temperatureLayer = L.layerGroup();

    // Nations > later make color "transparent"
    const svardey = L.polygon([
      [186, 1234], [206, 1154], [266, 1112], [266, 1104], [370, 1092], [432, 1106], [508, 1172], [486, 1302], [424, 1396], [242, 1206], [192, 1242]
    ], { color: "blue", weight: 2, fillOpacity: 0.2 })
      .bindPopup("<b><a href='svardey/svardey.html'>Svardey</a></b>");
    politicalLayer.addLayer(svardey);

        const tbd = L.polygon([
      [697, 1110], [727, 1121], [740, 1152], [759, 1135], [835, 1144], [833, 1201], [875, 1211], [893, 1230], [934, 1173], [954, 1177], [966, 1151], [1015, 1143], [1043, 1142], [1043, 1216], [1037, 1264], [1042, 1299], [1033, 1330], [1013, 1376], [981, 1369], [978, 1362], [989, 1351], [847, 1349], [860, 1320], [801, 1338], [718, 1306], [715, 1319], [731, 1326], [733, 1349], [651, 1376], [634, 1332], [587, 1329], [587, 1195], [642, 1122]
    ], { color: "blue", weight: 2, fillOpacity: 0.2 })
      .bindPopup("<b><a href='svardey/svardey.html'>tbd</a></b>");
    politicalLayer.addLayer(tbd);

    // Example climate markers (only for Temperature map)
    const ecoldZone = L.marker([218, 1180], {
      icon: L.divIcon({
        className: 'temp-label',
        html: '-23°C',
        iconSize: [50, 20],
        iconAnchor: [25, 10]
      })
    });
    const lcoldZone = L.marker([370, 1154], {
      icon: L.divIcon({
        className: 'temp-label',
        html: '-11°C',
        iconSize: [50, 20],
        iconAnchor: [25, 10]
        })
    });
    const mcoldZone = L.marker([892, 1111], {
      icon: L.divIcon({
        className: 'temp-label',
        html: '-4°C',
        iconSize: [50, 20],
        iconAnchor: [25, 10]
        })
    });
    const coldZone = L.marker([1555, 1070], {
      icon: L.divIcon({
        className: 'temp-label',
        html: '2°C',
        iconSize: [50, 20],
        iconAnchor: [25, 10]
      })
    });
    const scoldZone = L.marker([2000, 738], {
      icon: L.divIcon({
        className: 'temp-label',
        html: '4°C',
        iconSize: [50, 20],
        iconAnchor: [25, 10]
        })
    });

    temperatureLayer.addLayer(ecoldZone);
    temperatureLayer.addLayer(lcoldZone);
    temperatureLayer.addLayer(mcoldZone);
    temperatureLayer.addLayer(coldZone);
    temperatureLayer.addLayer(scoldZone);

    const baseMaps = {
      "Blank": blank,
      "Detailed": detailed,
      "Temperature": temperature,
      "Culture": culture,
      "Political": political
    };

    L.control.layers(baseMaps, null).addTo(map);

    map.on('baselayerchange', function(e) {
      map.removeLayer(politicalLayer);
      map.removeLayer(temperatureLayer);

      if (e.name === "Political") {
        map.addLayer(politicalLayer);
      } else if (e.name === "Temperature") {
        map.addLayer(temperatureLayer);
      }

    });

  </script>
</body>
</html>
