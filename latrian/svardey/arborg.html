
<html>
<head>
  <title>Árborg</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="../../map-base.css">
  <link rel="stylesheet" href="../../map-ui.css">
  <style>
    
  </style>
</head>
<body>
  <div id="map"></div>
  <div class="info-box" id="infoBox">
    <h3>Fortress – Árborg</h3>
    <p>
      Shape / Location: Rectangular-ish, along a mountain river
      <br>
      <br>
      Condition: Active
      <br>
      <br>
      Age: 184 Years
      <br>
      <br>
      Purpose: Guards river crossings; acts as river trade checkpoint
      <br>
      <br>
      Layout: Central keep; riverside gate; secondary watchtower; storage along inner wall
      <br>
      <br>
      Surroundings: Narrow river valley; high cliffs on either side; occasional snowpack flooding the river in spring
      <br>
      <br>
      Notes: Supplies brought via river; strategic location for controlling inland movement
    </p>
  </div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>

    const mapWidth = 9600;
    const mapHeight = 5400;
    const bounds = [[0, 0], [mapHeight, mapWidth]];
    const map = L.map('map', {
      crs: L.CRS.Simple,
      minZoom: -2,
      maxZoom: 3,
      maxBounds: bounds,
      maxBoundsViscosity: 1.0
    }).fitBounds(bounds);

    const blank = L.imageOverlay('../../images/latrian/svardey/arborg.jpg', bounds).addTo(map);

    const InfoControl = L.Control.extend({
      onAdd: function() {
    const btn = L.DomUtil.create('button', 'info-toggle-btn');
      btn.innerHTML = 'ℹ️ Info';

   
    L.DomEvent.disableClickPropagation(btn);

    btn.onclick = function() {
    const box = document.getElementById('infoBox');
    box.classList.toggle('open');
    };
    return btn;
  },
  onRemove: function() {}
});

new InfoControl({ position: 'topright' }).addTo(map);

// --- Go Back Button Control ---
const BackButton = L.Control.extend({
  onAdd: function() {
    const container = L.DomUtil.create('div', 'leaflet-bar leaflet-control');
    const btn = L.DomUtil.create('button', 'back-button', container);
    btn.innerHTML = '⬅️ Back';
    btn.title = 'Return to previous map';

    // Prevent map drag when clicking
    L.DomEvent.disableClickPropagation(btn);

    // Set your custom back target here (relative or absolute URL)
    const previousMapURL = 'svardey.html'; // <-- change manually per map

    btn.onclick = function(e) {
      e.stopPropagation();
      window.location.href = previousMapURL;
    };

    return container;
  },
  onRemove: function() {}
});

// Add it to top-left next to zoom controls
new BackButton({ position: 'topleft' }).addTo(map);

    
  </script>
</body>
</html>
